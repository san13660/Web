<html>
    <body>
        <script>
            const messages = document.createElement("ul")
            const sendContainer = document.createElement("div")
            const textarea = document.createElement("textarea")
            const button = document.createElement("button")
            button.append("Enviar")

            document.body.append(messages)
            sendContainer.append(textarea)
            sendContainer.append(button)

            sendContainer.style = `
                display: flex;
            `

            document.body.append(sendContainer)

            function getMessage(){
                fetch('http://msdeus.site:7000', {
                    method: 'GET'
                }).then(response => {
                    return response.json()
                }).then(response => {
                    messages.innerHTML = ''
                    response.forEach(element => {
                        const li = document.createElement('li')
                        const strong = document.createElement("strong")
                        strong.append(element.username + ': ')
                        li.append(strong)
                        li.append(element.chatmessage)
                        messages.append(li)
                    })
                })
            }
            

            getMessage()

            button.onclick = function(){
                fetch('http://msdeus.site:7000', {
                    method: 'POST',
                    body: `{
                        "username": "anonimo",
                        "chatmessage": "${textarea.value.trim()}"
                    }`
                }).then(() => {
                    textarea.innerHTML = ""
                    getMessage()
                })
            }

            setInterval(getMessage, 1000)

            button.on
        </script>
    </body>
</html>